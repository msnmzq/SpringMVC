### 文件上三要素：

- form表单的method='post'
- form表单的enctype="multipart/form-data"

- input type="file"



### springmvc实现上传单个文件

- 编写jsp页面

  ```jsp
  <%@ page contentType="text/html;charset=UTF-8" language="java" %>
  <html>
  <head>
      <title>Title</title>
  </head>
  <body>
  <form action="quick15" method="post" enctype="multipart/form-data">
     文件 <input type="file" name="file">
      <input type="submit" value="提交">
  </form>
  </body>
  </html>
  ```

- 配置文件上传解析器

  ```xml
  <!--    配置文件上传解析器-->
  <!--    id不可变-->
      <bean id="multipartResolver" class="org.springframework.web.multipart.commons.CommonsMultipartResolver">
          <property name="maxUploadSize" value="5242800"></property>//上传文件总大小
          <property name="maxUploadSizePerFile" value="5242800"></property>//每个文件的大小
          <property name="defaultEncoding" value="utf-8"></property>//默认编码
      </bean>
  ```

- 调用API完成相应功能

  ```java
      @RequestMapping("quick15")
      @ResponseBody
      public void test15(MultipartFile file) throws IOException {//形参必须和input的name属性一致
          System.out.println(file);
          //将文件保存到服务器
          String s = file.getOriginalFilename();//获取文件的名字
          System.out.println(s);
          file.transferTo(new File("c:\\upload\\"+s));//upload后别忘了写\\
      }
  ```

  

<h3>springmvc实现上传多个文件</h3>

```
<form action="quick15" method="post" enctype="multipart/form-data">
   文件
    <input type="file" name="file">
    <input type="file" name="file">
    <input type="file" name="file">
    <input type="submit" value="提交">
</form>
```

```
    @RequestMapping("quick15")
    @ResponseBody
    public void test15(MultipartFile [] file) throws IOException {
        System.out.println(file);
        //将文件保存到服务器
//        System.out.println(file.getOriginalFilename());
        for (MultipartFile multipartFile : file) {
            String s = multipartFile.getOriginalFilename();
            System.out.println(s);
            multipartFile.transferTo(new File("c:\\upload\\"+s));
        }
       
    }
```

